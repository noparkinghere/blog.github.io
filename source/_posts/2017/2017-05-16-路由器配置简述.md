---
layout: "post"
title: "路由器配置简述"
category: "软件应用"
date: "2017-05-16 16:10"
---

*本文不会深入讨论各种协议和原理，只针对家庭应用，这边详细介绍家庭使用路由器的各种配置和应用场景。*

### 基本概念

以下内容比较抽象，如果不需要具体了解的话，可以只看**路由器交换机的大致区别**。

Hub/集线器：集线器的主要功能是对接收到的信号进行再生整形放大，以扩大网络的传输距离，同时把所有节点集中在以它为中心的节点上。集线器工作于OSI/RM参考模型的物理层和数据链路层的MAC（介质访问控制）子层。工作原理：首先是节点发信号到线路，集线器接收该信号，因信号在电缆传输中有衰减，集线器接收信号后将衰减的信号整形放大，最后集线器将放大的信号广播转发给其他所有端口。

桥接：是指依据 OSI 网络模型的链路层的地址，对网络数据包进行转发的过程，工作在 OSI 的第二层。一般的交换机，网桥就有桥接作用。

AP（Wireless Access Point）：AP 就是传统有效网络中的 HUB，也是组建小型无线局域网时常用的设备。

NAT（Network Address Translation，网络地址转换）：当在专用网内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但现在又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。装有NAT软件的路由器叫做NAT路由器，NAT 之内的 PC 联机到 Internet 上面时，他所显示的 IP 是 NAT 主机的公共 IP。

调制解调器：Modulator（调制器）与Demodulator（解调器）的简称，中文称为调制解调器（港台称之为数据机），根据Modem的谐音，亲昵地称之为“猫”。它是在发送端通过调制将数字信号转换为模拟信号，而在接收端通过解调再将模拟信号转换为数字信号的一种装置。而随着光纤的普及，现在很多地方使用“光猫”，和传统的“猫”相比，“光猫”可以将数字信号转换为光信号进行传输，因此可以提供更快更稳定的上网体验。

交换机：交换机（Switch）意为“开关”是一种用于电（光）信号转发的网络设备。为接入交换机的任意两个网络节点提供**独享**的电信号通路。集线器、交换机都是做端口扩展的，就是扩大局域网(通常都是以太网)的接入点，也就是能让局域网可以连进来更多的电脑。交换机只有一根网线上网，但是大家上网是分别拨号，各自使用自己的宽带，交换机根据 MAC 地址寻址传输数据，大家上网都相当于单独接入了因特网服务，在速度和账号方面互不影响。

DHCP（Dynamic Host Configuration Protocol，动态主机配置协议）：是一个局域网的网络协议，使用UDP协议工作， 主要有两个用途：给内部网络或网络服务供应商自动分配IP地址，给用户或者内部网络管理员作为对所有计算机作中央管理的手段，在RFC 2131中有详细的描述。

WAN：广域网（WAN，Wide Area Network）也称远程网（long haul network ），一般端口或者设置时显示为 WAN ，表示这边控制的是外网，即因特网。

LAN：局域网（Local Area Network，LAN）是指在某一区域内由多台计算机互联成的计算机组。显然这个表示的是你的内网，内网的意思就是说，你连接这个 IP 时，访问的实际是你的内部网络，而不是因特网，例如：路由器的管理地址：192.168.1.1/192.168.0.1

SSID：Service Set Identifier的缩写，意思是：服务集标识。SSID 技术可以将一个无线局域网分为几个需要不同身份验证的子网络，每一个子网络都需要独立的身份验证，只有通过身份验证的用户才可以进入相应的子网络，防止未被授权的用户进入本网络。SSID 最多可以有32个字符，无线网卡设置了不同的 SSID 就可以进入不同网络。SSID 通常由AP广播出来，通过操作系统的扫描功能可以查看当前区域内的 SSID。出于安全考虑可以不广播 SSID，此时用户就要手工设置 SSID 才能进入相应的网络。

路由器：路由器（英语：Router，又称路径器）是一种电讯网络设备，提供路由与转送两种重要机制，可以决定数据包从来源端到目的端所经过的路由路径（host 到 host 之间的传输路径），这个过程称为路由；将路由器输入端的数据包移送至适当的路由器输出端（在路由器内部进行），这称为转送。路由器一般采用 DHCP 协议给不同的电脑分配不同的 ID 号(即IP地址)，利用不同网络的 ID 号(即IP地址)来确定数据转发的地址。另外值得注意的是：路由器通过一定配置，一般都可以当作交换机来使用。现在一般使用的无线路由器只是将有线改成了无线，不再受 LAN 口多少的限制。

路由器交换机的大致区别：交换机用来实现上网接入的扩展，通过电脑的 MAC 地址来识别通讯的主机；路由器会分配 IP 地址给各个电脑，然后通过不同电脑的 IP 地址来传输数据。交换机相当于对上一层的网络进行的扩展，每个接入用户都可以单独连接这个上网的入口，因此大家接入网络后互不影响，但坏处是，每个接入设备都必须有个上网的账号；路由器一般内置了一个虚拟拨号功能，通过同一台路由器上网的电脑是共用一个宽带账号，在使用过程中，上路由器实际是管理了一个接入网络的入口，对大家进行统一管理，所有人公用一条入网的路口，因此大家上网要相互影响，但好处是所有人可以共用一个账号。

<!-- more -->

### 路由器使用

下面说下，无路由器的上网方式：

- 首先运营商会将网线拉入居室，该网络可以是传统的电话线/双绞线。
- 入户的信号线，需要通过调制解调器（猫）转换为数字信号，通过网线输出。
- 早期的电话上网或者无路由上网的情况，将猫出来的网线直接插入电脑，然后，使用操作系统中的，ADSL 拨号，拨号成功后，windows 右下角就会显示可以链接上网了。

![](https://raw.githubusercontent.com/noparkinghere/noparkinghere.github.io/master/img/2017-05-16-路由器配置简述/1.png)

有路由器的方式，通过上图，我们可以看到，实际使用过程中，分为以下几步：

- 首先运营商会将网线拉入居室，该网络可以是传统的双绞线，也可以是现在的光纤。
- 入户的信号线，需要通过调制解调器（猫）转换为数字信号，通过网线输出。注意，这边的话根据你宽带不同，可以是“普通猫”也可以是“光猫”，一般而言，这部分都是运营商帮弄好的，但不排除一些意外。
- 运营商的责任一般只到上面两个步骤，负责宽带入户/外网的接入，网线接入成功后，就不再是他们的职责了，路由器以及相关内网的布置一般由用户自己完成。
- 以无线路由器为例，用户需要将“猫”输出的网线插入到无线路由器的 WAN 口中，接着我们连接上无线路由器，连接的方法有两种，传统方法是将 LAN 口和 PC 链接；另一个方法是，无线路由器上点后会自动开启无线信号，一般是一个没有密码的开放网络（例如：TP-1212324324），使用手机连接这个网络后即可。
- 登录 LAN 无线路由管理地址，设置无线路由器，这边各个网络环境的不同设置也不一，后面详细讲解。
- 设置完无线路由器后，通过 LAN 后将网线引出插入电脑中，或者笔记本和手机链接上路由器的无线网络，就可以上网了。

### 路由器 LAN 管理地址使用

有关路由器的管理地址，一般购买的路由器底部可以看到相关信息，如果根据这些信息仍然不能访问管理页面的话，则需要重置路由器。这边给出常用的一些路由器管理地址列表，但注意随着新产品的上线，很多地址未必有效了，实际使用还是以说明书为准。

品牌 | LAN管理地址 | 用户名 | 密码
- | - | - | -
TP-LINK | 192.168.1.1 | admin | admin
华硕 | 192.168.1.1 | adsl | adsl1234
阿尔卡特 | 192.168.1.1 | 无 | 无
中兴 | 192.168.1.1 | adsl | adsl831
华为 | 192.168.1.1 | ADMIN | ADMIN
WST | 192.168.0.1 | root | root


下面我们以 TP-LINK 为例进行详细讲解：

![](https://raw.githubusercontent.com/noparkinghere/noparkinghere.github.io/master/img/2017-05-16-路由器配置简述/2.png)

![](https://raw.githubusercontent.com/noparkinghere/noparkinghere.github.io/master/img/2017-05-16-路由器配置简述/3.png)

根据上图，我们可以看到路由器底部有详细的信息，使用你的手机/电脑连接上路由器后，我们使用浏览器访问上图的 `192.168.1.1` 这个地址，之后输入账户名密码，默认为 admin，就可以开始设置路由器了。

![](https://raw.githubusercontent.com/noparkinghere/noparkinghere.github.io/master/img/2017-05-16-路由器配置简述/4.png)

上图看到的是最近几年比较流行的新版路由器，新版路由器一般会更加人性化的给出一个“域名”，不需要访问 `192.168.1.1` 地址，直接访问这个域名既可以设置路由器。实际上，`toplogin.cn` 一般默认对应的地址为 `192.168.0.1`，也就是说输入 `toplogin.cn` 和 `192.168.0.1` 是一样的效果。

### 单路由器组建网络

*这种方式，适合于两室一厅/三室一厅，路由器处于房子中间开放位置（不藏在箱子盒子内，各房间信号良好）。*

在简单的家用无线网设置之前，我们需要先考察下“猫”是否被设置过，随着通讯设备越来越智能化，事实上，现在的“猫”大都已经集成了拨号上网的功能，服务较好的员工，会将你的账号和密码直接设置到“猫”中，而不再需要你通过路由器来拨号了。换句话说，“猫”中出来的网线直接就可以上网了，路由器只有管理局域网的作用。

这边以传统的 TP-LINK 为例，配置一个需要账号上网和局域网连接的路由器：

- 用无线或网线连接路由器，成功后在地址栏中输入“192.168.1.1”（设置过程中路由器可能提示重启，但这个IP地址不变。），然后在弹出的窗口中，输入默认的用户名：admin 密码：admin。（一般这些信息都会贴在路由器背面）。如果你不是新买的路由器，按照我上面提供的方法无法访问的话（看路由器底部信息），则按下路由器的 reset 键 10 秒钟，重置路由器。

![](https://raw.githubusercontent.com/noparkinghere/noparkinghere.github.io/master/img/2017-05-16-路由器配置简述/5.jpg)

- TP-LINK 提供了比较人性化的设置，新手的话可以直接使用设置向导，一直点击下一步，最后选择 ADSL 虚拟拨号。

![](http://upload-images.jianshu.io/upload_images/5532120-ff73e870f63bf834.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![](http://upload-images.jianshu.io/upload_images/5532120-18fad7ecc1369f79.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![](http://upload-images.jianshu.io/upload_images/5532120-1e7dd5a612fa82f3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 接下来我们需要输入运营商给你账号和密码，这个就和网站的账号密码类似，只有有效的账号和密码验证通过后，运营商才会让你接入互联网。这个账户密码最好写在纸上贴在路由器上，否则下次如果重置路由器的话，需要打电话问运营商。

![](http://upload-images.jianshu.io/upload_images/5532120-fd11f0c6e0745fc7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


以上步骤基本设置成功后基本就完成了上网拨号的功能，但路由器还不只这些，我们需要进一步设置。

- 如果你不是使用向导模式，就需要通过设置 WAN 口来实现拨号上网，这一步步骤和上面等同。一般我们选择自动连接，或者按需链接。

![](https://raw.githubusercontent.com/noparkinghere/noparkinghere.github.io/master/img/2017-05-16-路由器配置简述/6.jpg)

- 既然使用了无线路由功能，那无线路由就得好好设置，在基本设置中，我们修改你的无线信号名称（SSID） 为自己常用名称，比如 home ，wifi 等，但注意老款路由器对中文支持不好，一般还是推荐用数字和字母来设置。

![](https://raw.githubusercontent.com/noparkinghere/noparkinghere.github.io/master/img/2017-05-16-路由器配置简述/7.jpg)

- 修改你的 LAN 口设置，LAN 口设置的 IP 地址，为你开始登录管理路由器的地址，一般简单的家用的话，这个地址可以不用修改。

![](https://raw.githubusercontent.com/noparkinghere/noparkinghere.github.io/master/img/2017-05-16-路由器配置简述/8.jpg)


### 多台路由器组建网络

*这种适合于家庭路由器安装位置不佳，或者房间过多的情况，这时需要通过额外的一个路由器来增加一个信号源。*

多台路由器建立网络时，这边多种解决方案，下面一个个来介绍：

#### 路由器+交换机

两台路由器连接时，其中一台路由器当交换机来使用，方法是：将第一台路由 器的 LAN 口用网线和 第二台无线路由器连接，这时第二台路由器就作为交换机使用，这台路由器没法分配 IP 地址，所有的 IP 分配由第一台路由器完成，第二台路由器这边相当于一个扩展的无线 hub，对它也无需进行额外配置。

#### 路由器+AP

TP-LINK 售卖一些小型的路由器， 这些路由器信号弱一般只能覆盖一个房间，但为了方便设置，都提供了 AP 功能，使用该功能的话，基本上可以很方便的将路由器信号进行放大，无需额外的设置。

如果 AP 设置存在问题的话，这类路由器能够通过开关选择 route 模式，这时就相当于一个完整的路由器了，在 WAN 中不选择 ADSL 拨号，而选择动态分配 IP 即可。这时的分配方式是做一个二级路由，新的路由器再次建一个子网络。

#### 路由器+无线信号放大器

市面上现在有售卖一种无线信号放大器，该放大器，是将一个无线信号接收后放大出来，且对 SSID 和密码进行完整的克隆，产生一个相同 wifi 名和密码的信号，也就是说你在不需要连接新的 wifi 就可以上网。

### 多台路由器和交换机组建网络

*这种方式，适合于中小企业的公司网络，以及别墅使用，需要给多个房间留出有线网口*

使用这个之前一定要明白路由器和交换机的大概区别，可以看上面的**路由器交换机的区别**。

这种方式建议将拨号设置在“猫”中（或者使用一个单独的拨号路由器），然后猫直接接入交换机，交换机再和每个电脑链接，如果需要使用无线网的话，交换机再分别和各个路由器连接，每台路由器设置时，选择动态 IP 方式，每个路由器所对应的 LAN 管理地址不能相同需要手动修改，否则的话会产生冲突，每个路由器建立单独的局域网提供通讯设备的访问。



> 参考链接：
> https://zhidao.baidu.com/question/438038951.html
> http://www.cnblogs.com/Lynn-Zhang/articles/5754336.html
> https://wenku.baidu.com/view/fcc05bcdda38376baf1faea7.html
> http://www.192ly.com/basic/ap-mode-and-router-mode-difference.html
> http://baike.baidu.com/link?url=omJf1nxKnBwpWR6kznR4VRcxdhcXNfus-_O8-cohO7zrpHYuEAAtCTYOQ2CGacnjjYrCi0ao5xzYDcq0E3F_pq
> http://blog.sina.com.cn/s/blog_7a6598170101017d.html
> http://baike.baidu.com/item/AP/2760808
> http://baike.baidu.com/item/HUB
> https://www.zhihu.com/question/21782368
> https://zh.wikipedia.org/wiki/%E8%B7%AF%E7%94%B1%E5%99%A8
> http://www.ruanyifeng.com/blog/2009/06/how_to_connect_2_routers_in_home_networking
> http://www.ihref.com/read-16675.html
> http://jingyan.baidu.com/article/eae07827e3e9fc1fec548590.html
